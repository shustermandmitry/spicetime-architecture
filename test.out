
> spicetime-architecture@0.1.0 test /Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture
> turbo run test

• Packages in scope: @spicetime/react-app
• Running test in 1 packages
• Remote caching disabled
@spicetime/react-app:test: cache miss, executing c8ae1734369a7b20
@spicetime/react-app:test: 
@spicetime/react-app:test: > @spicetime/react-app@0.1.0 test /Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/packages/spicetime-react-app
@spicetime/react-app:test: > vitest run
@spicetime/react-app:test: 
@spicetime/react-app:test: Excluding the following test paths: [
@spicetime/react-app:test:   '**/node_modules',
@spicetime/react-app:test:   '**/dist',
@spicetime/react-app:test:   '**/claude/**/*',
@spicetime/react-app:test:   '**/.git',
@spicetime/react-app:test:   '**/.cache/**',
@spicetime/react-app:test:   '**/docs/**/*'
@spicetime/react-app:test: ]
@spicetime/react-app:test: 
@spicetime/react-app:test:  RUN  v2.1.8 /Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/packages/spicetime-react-app
@spicetime/react-app:test: 
@spicetime/react-app:test: stdout | src/components/PatchDispatcher/core/processor.test.ts
@spicetime/react-app:test: setupTests is loaded
@spicetime/react-app:test: 
@spicetime/react-app:test: stdout | src/components/PatchDispatcher/components/PatchDispatcher.test.tsx
@spicetime/react-app:test: setupTests is loaded
@spicetime/react-app:test: 
@spicetime/react-app:test: stdout | src/components/PatchDispatcher/test/integration/PatchDispatcher.test.tsx
@spicetime/react-app:test: setupTests is loaded
@spicetime/react-app:test: 
@spicetime/react-app:test: stdout | src/components/PatchDispatcher/context/FileSystemContext.test.tsx
@spicetime/react-app:test: setupTests is loaded
@spicetime/react-app:test: 
@spicetime/react-app:test:  ❯ src/components/PatchDispatcher/test/integration/PatchDispatcher.test.tsx (0 test)
@spicetime/react-app:test:  ✓ src/components/PatchDispatcher/core/processor.test.ts (7 tests) 4ms
@spicetime/react-app:test: stderr | src/components/PatchDispatcher/context/FileSystemContext.test.tsx > FileSystemContext > useFileSystem hook > throws error when used outside FileSystemProvider
@spicetime/react-app:test: Error: Uncaught [Error: useFileSystem must be used within FileSystemProvider]
@spicetime/react-app:test:     at reportException (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
@spicetime/react-app:test:     at innerInvokeEventListeners (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
@spicetime/react-app:test:     at invokeEventListeners (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
@spicetime/react-app:test:     at HTMLUnknownElementImpl._dispatch (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
@spicetime/react-app:test:     at HTMLUnknownElementImpl.dispatchEvent (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
@spicetime/react-app:test:     at HTMLUnknownElement.dispatchEvent (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
@spicetime/react-app:test:     at Object.invokeGuardedCallbackDev (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
@spicetime/react-app:test:     at invokeGuardedCallback (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
@spicetime/react-app:test:     at beginWork$1 (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:27451:7)
@spicetime/react-app:test:     at performUnitOfWork (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:26560:12) Error: useFileSystem must be used within FileSystemProvider
@spicetime/react-app:test:     at useFileSystem (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/packages/spicetime-react-app/src/components/PatchDispatcher/context/FileSystemContext.ts:24:11)
@spicetime/react-app:test:     at /Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/packages/spicetime-react-app/src/components/PatchDispatcher/context/FileSystemContext.test.tsx:37:37
@spicetime/react-app:test:     at TestComponent (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/@testing-library+react@16.1.0_@testing-library+dom@10.4.0_@types+react@18.2.0_react-dom@18.2._6yahmve7w4nwvoiw2zrnw4dsbm/node_modules/@testing-library/react/dist/pure.js:309:27)
@spicetime/react-app:test:     at renderWithHooks (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:16305:18)
@spicetime/react-app:test:     at mountIndeterminateComponent (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:20074:13)
@spicetime/react-app:test:     at beginWork (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:21587:16)
@spicetime/react-app:test:     at HTMLUnknownElement.callCallback (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
@spicetime/react-app:test:     at HTMLUnknownElement.callTheUserObjectsOperation (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
@spicetime/react-app:test:     at innerInvokeEventListeners (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
@spicetime/react-app:test:     at invokeEventListeners (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
@spicetime/react-app:test: Error: Uncaught [Error: useFileSystem must be used within FileSystemProvider]
@spicetime/react-app:test:     at reportException (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
@spicetime/react-app:test:     at innerInvokeEventListeners (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
@spicetime/react-app:test:     at invokeEventListeners (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
@spicetime/react-app:test:     at HTMLUnknownElementImpl._dispatch (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
@spicetime/react-app:test:     at HTMLUnknownElementImpl.dispatchEvent (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
@spicetime/react-app:test:     at HTMLUnknownElement.dispatchEvent (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
@spicetime/react-app:test:     at Object.invokeGuardedCallbackDev (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
@spicetime/react-app:test:     at invokeGuardedCallback (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
@spicetime/react-app:test:     at beginWork$1 (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:27451:7)
@spicetime/react-app:test:     at performUnitOfWork (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:26560:12) Error: useFileSystem must be used within FileSystemProvider
@spicetime/react-app:test:     at useFileSystem (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/packages/spicetime-react-app/src/components/PatchDispatcher/context/FileSystemContext.ts:24:11)
@spicetime/react-app:test:     at /Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/packages/spicetime-react-app/src/components/PatchDispatcher/context/FileSystemContext.test.tsx:37:37
@spicetime/react-app:test:     at TestComponent (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/@testing-library+react@16.1.0_@testing-library+dom@10.4.0_@types+react@18.2.0_react-dom@18.2._6yahmve7w4nwvoiw2zrnw4dsbm/node_modules/@testing-library/react/dist/pure.js:309:27)
@spicetime/react-app:test:     at renderWithHooks (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:16305:18)
@spicetime/react-app:test:     at mountIndeterminateComponent (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:20074:13)
@spicetime/react-app:test:     at beginWork (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:21587:16)
@spicetime/react-app:test:     at HTMLUnknownElement.callCallback (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
@spicetime/react-app:test:     at HTMLUnknownElement.callTheUserObjectsOperation (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
@spicetime/react-app:test:     at innerInvokeEventListeners (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
@spicetime/react-app:test:     at invokeEventListeners (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/jsdom@25.0.1/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
@spicetime/react-app:test: The above error occurred in the <TestComponent> component:
@spicetime/react-app:test: 
@spicetime/react-app:test:     at TestComponent (/Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/node_modules/.pnpm/@testing-library+react@16.1.0_@testing-library+dom@10.4.0_@types+react@18.2.0_react-dom@18.2._6yahmve7w4nwvoiw2zrnw4dsbm/node_modules/@testing-library/react/dist/pure.js:307:5)
@spicetime/react-app:test: 
@spicetime/react-app:test: Consider adding an error boundary to your tree to customize error handling behavior.
@spicetime/react-app:test: Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.
@spicetime/react-app:test: 
@spicetime/react-app:test:  ✓ src/components/PatchDispatcher/context/FileSystemContext.test.tsx (5 tests) 26ms
@spicetime/react-app:test:  ❯ src/components/PatchDispatcher/components/PatchDispatcher.test.tsx (8 tests | 5 failed) 2061ms
@spicetime/react-app:test:    × PatchDispatcher Component > processes valid patch files 2ms
@spicetime/react-app:test:      → jest is not defined
@spicetime/react-app:test:    × PatchDispatcher Component > ignores non-patch files 1014ms
@spicetime/react-app:test:      → [Function onPatchComplete] is not a spy or a call to a spy!
@spicetime/react-app:test: 
@spicetime/react-app:test: Ignored nodes: comments, script, style
@spicetime/react-app:test: [36m<html>[39m
@spicetime/react-app:test:   [36m<head />[39m
@spicetime/react-app:test:   [36m<body>[39m
@spicetime/react-app:test:     [36m<div>[39m
@spicetime/react-app:test:       [36m<div[39m
@spicetime/react-app:test:         [33mclass[39m=[32m"  "[39m
@spicetime/react-app:test:       [36m>[39m
@spicetime/react-app:test:         [36m<div>[39m
@spicetime/react-app:test:           [0mDrop patch files here[0m
@spicetime/react-app:test:         [36m</div>[39m
@spicetime/react-app:test:       [36m</div>[39m
@spicetime/react-app:test:     [36m</div>[39m
@spicetime/react-app:test:   [36m</body>[39m
@spicetime/react-app:test: [36m</html>[39m
@spicetime/react-app:test:    × PatchDispatcher Component > handles file read errors correctly 1011ms
@spicetime/react-app:test:      → expected "spy" to be called with arguments: [ ObjectContaining{…} ]
@spicetime/react-app:test: 
@spicetime/react-app:test: Received: 
@spicetime/react-app:test: 
@spicetime/react-app:test:   1st spy call:
@spicetime/react-app:test: 
@spicetime/react-app:test:   Array [
@spicetime/react-app:test: -   ObjectContaining {
@spicetime/react-app:test: -     "message": "Read error",
@spicetime/react-app:test: -   },
@spicetime/react-app:test: +   [TypeError: file.text is not a function],
@spicetime/react-app:test:   ]
@spicetime/react-app:test: 
@spicetime/react-app:test: 
@spicetime/react-app:test: Number of calls: 1
@spicetime/react-app:test: 
@spicetime/react-app:test: 
@spicetime/react-app:test: Ignored nodes: comments, script, style
@spicetime/react-app:test: [36m<html>[39m
@spicetime/react-app:test:   [36m<head />[39m
@spicetime/react-app:test:   [36m<body>[39m
@spicetime/react-app:test:     [36m<div>[39m
@spicetime/react-app:test:       [36m<div[39m
@spicetime/react-app:test:         [33mclass[39m=[32m"  "[39m
@spicetime/react-app:test:       [36m>[39m
@spicetime/react-app:test:         [36m<div>[39m
@spicetime/react-app:test:           [0mDrop patch files here[0m
@spicetime/react-app:test:         [36m</div>[39m
@spicetime/react-app:test:       [36m</div>[39m
@spicetime/react-app:test:     [36m</div>[39m
@spicetime/react-app:test:   [36m</body>[39m
@spicetime/react-app:test: [36m</html>[39m
@spicetime/react-app:test:    × PatchDispatcher Component > shows processing state during patch application 8ms
@spicetime/react-app:test:      → Unable to find an element with the text: Processing patch.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
@spicetime/react-app:test: 
@spicetime/react-app:test: Ignored nodes: comments, script, style
@spicetime/react-app:test: [36m<body>[39m
@spicetime/react-app:test:   [36m<div>[39m
@spicetime/react-app:test:     [36m<div[39m
@spicetime/react-app:test:       [33mclass[39m=[32m"  "[39m
@spicetime/react-app:test:     [36m>[39m
@spicetime/react-app:test:       [36m<div>[39m
@spicetime/react-app:test:         [0mDrop patch files here[0m
@spicetime/react-app:test:       [36m</div>[39m
@spicetime/react-app:test:     [36m</div>[39m
@spicetime/react-app:test:   [36m</div>[39m
@spicetime/react-app:test: [36m</body>[39m
@spicetime/react-app:test:    × PatchDispatcher Component > must be used within FileSystemContext 5ms
@spicetime/react-app:test:      → expected [Function] to throw an error
@spicetime/react-app:test: 
@spicetime/react-app:test: ⎯⎯⎯⎯⎯⎯ Failed Suites 1 ⎯⎯⎯⎯⎯⎯⎯
@spicetime/react-app:test: 
@spicetime/react-app:test:  FAIL  src/components/PatchDispatcher/test/integration/PatchDispatcher.test.tsx [ src/components/PatchDispatcher/test/integration/PatchDispatcher.test.tsx ]
@spicetime/react-app:test: Error: Failed to resolve import "@/components/PatchDispatcher" from "src/components/PatchDispatcher/test/integration/PatchDispatcher.test.tsx". Does the file exist?
@spicetime/react-app:test:   Plugin: vite:import-analysis
@spicetime/react-app:test:   File: /Users/dmitryshusterman/WebstormProjects/spicetime-architecture-setup/spicetime-architecture/packages/spicetime-react-app/src/components/PatchDispatcher/test/integration/PatchDispatcher.test.tsx:9:51
@spicetime/react-app:test:   2  |  import { fireEvent, render, waitFor } from "@testing-library/react";
@spicetime/react-app:test:   3  |  import path from "path";
@spicetime/react-app:test:   4  |  import { FileSystemContext, PatchDispatcher } from "@/components/PatchDispatcher";
@spicetime/react-app:test:      |                                                      ^
@spicetime/react-app:test:   5  |  import { afterEach, beforeEach, describe, expect, it, vi } from "vitest";
@spicetime/react-app:test:   6  |  import "@testing-library/jest-dom";
@spicetime/react-app:test:  ❯ TransformPluginContext._formatError ../../node_modules/.pnpm/vite@6.0.7_@types+node@22.10.5_jiti@2.4.2_terser@5.37.0_yaml@2.7.0/node_modules/vite/dist/node/chunks/dep-BJP6rrE_.js:47397:41
@spicetime/react-app:test:  ❯ TransformPluginContext.error ../../node_modules/.pnpm/vite@6.0.7_@types+node@22.10.5_jiti@2.4.2_terser@5.37.0_yaml@2.7.0/node_modules/vite/dist/node/chunks/dep-BJP6rrE_.js:47392:16
@spicetime/react-app:test:  ❯ normalizeUrl ../../node_modules/.pnpm/vite@6.0.7_@types+node@22.10.5_jiti@2.4.2_terser@5.37.0_yaml@2.7.0/node_modules/vite/dist/node/chunks/dep-BJP6rrE_.js:45642:23
@spicetime/react-app:test:  ❯ ../../node_modules/.pnpm/vite@6.0.7_@types+node@22.10.5_jiti@2.4.2_terser@5.37.0_yaml@2.7.0/node_modules/vite/dist/node/chunks/dep-BJP6rrE_.js:45761:39
@spicetime/react-app:test:  ❯ TransformPluginContext.transform ../../node_modules/.pnpm/vite@6.0.7_@types+node@22.10.5_jiti@2.4.2_terser@5.37.0_yaml@2.7.0/node_modules/vite/dist/node/chunks/dep-BJP6rrE_.js:45688:7
@spicetime/react-app:test:  ❯ EnvironmentPluginContainer.transform ../../node_modules/.pnpm/vite@6.0.7_@types+node@22.10.5_jiti@2.4.2_terser@5.37.0_yaml@2.7.0/node_modules/vite/dist/node/chunks/dep-BJP6rrE_.js:47223:18
@spicetime/react-app:test:  ❯ loadAndTransform ../../node_modules/.pnpm/vite@6.0.7_@types+node@22.10.5_jiti@2.4.2_terser@5.37.0_yaml@2.7.0/node_modules/vite/dist/node/chunks/dep-BJP6rrE_.js:41034:27
@spicetime/react-app:test: 
@spicetime/react-app:test: ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/6]⎯
@spicetime/react-app:test: 
@spicetime/react-app:test: ⎯⎯⎯⎯⎯⎯⎯ Failed Tests 5 ⎯⎯⎯⎯⎯⎯⎯
@spicetime/react-app:test: 
@spicetime/react-app:test:  FAIL  src/components/PatchDispatcher/components/PatchDispatcher.test.tsx > PatchDispatcher Component > processes valid patch files
@spicetime/react-app:test: ReferenceError: jest is not defined
@spicetime/react-app:test:  ❯ src/components/PatchDispatcher/components/PatchDispatcher.test.tsx:87:29
@spicetime/react-app:test:      85|     mockFs.readFile.mockResolvedValueOnce('mocked file content')
@spicetime/react-app:test:      86| 
@spicetime/react-app:test:      87|     const onPatchComplete = jest.fn()
@spicetime/react-app:test:        |                             ^
@spicetime/react-app:test:      88|     const { container } = renderWithFileSystem(
@spicetime/react-app:test:      89|       <PatchDispatcher onPatchComplete={onPatchComplete} />,
@spicetime/react-app:test: 
@spicetime/react-app:test: ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/6]⎯
@spicetime/react-app:test: 
@spicetime/react-app:test:  FAIL  src/components/PatchDispatcher/components/PatchDispatcher.test.tsx > PatchDispatcher Component > ignores non-patch files
@spicetime/react-app:test: TypeError: [Function onPatchComplete] is not a spy or a call to a spy!
@spicetime/react-app:test: 
@spicetime/react-app:test: Ignored nodes: comments, script, style
@spicetime/react-app:test: [36m<html>[39m
@spicetime/react-app:test:   [36m<head />[39m
@spicetime/react-app:test:   [36m<body>[39m
@spicetime/react-app:test:     [36m<div>[39m
@spicetime/react-app:test:       [36m<div[39m
@spicetime/react-app:test:         [33mclass[39m=[32m"  "[39m
@spicetime/react-app:test:       [36m>[39m
@spicetime/react-app:test:         [36m<div>[39m
@spicetime/react-app:test:           [0mDrop patch files here[0m
@spicetime/react-app:test:         [36m</div>[39m
@spicetime/react-app:test:       [36m</div>[39m
@spicetime/react-app:test:     [36m</div>[39m
@spicetime/react-app:test:   [36m</body>[39m
@spicetime/react-app:test: [36m</html>[39m
@spicetime/react-app:test:  ❯ src/components/PatchDispatcher/components/PatchDispatcher.test.tsx:135:35
@spicetime/react-app:test:     133| 
@spicetime/react-app:test:     134|     await waitFor(() => {
@spicetime/react-app:test:     135|       expect(onPatchComplete).not.toHaveBeenCalled()
@spicetime/react-app:test:        |                                   ^
@spicetime/react-app:test:     136|     })
@spicetime/react-app:test:     137|   })
@spicetime/react-app:test:  ❯ runWithExpensiveErrorDiagnosticsDisabled ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:47:12
@spicetime/react-app:test:  ❯ checkCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:124:77
@spicetime/react-app:test:  ❯ Timeout.checkRealTimersCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:118:16
@spicetime/react-app:test: 
@spicetime/react-app:test: ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/6]⎯
@spicetime/react-app:test: 
@spicetime/react-app:test:  FAIL  src/components/PatchDispatcher/components/PatchDispatcher.test.tsx > PatchDispatcher Component > handles file read errors correctly
@spicetime/react-app:test: AssertionError: expected "spy" to be called with arguments: [ ObjectContaining{…} ]
@spicetime/react-app:test: 
@spicetime/react-app:test: Received: 
@spicetime/react-app:test: 
@spicetime/react-app:test:   1st spy call:
@spicetime/react-app:test: 
@spicetime/react-app:test:   Array [
@spicetime/react-app:test: -   ObjectContaining {
@spicetime/react-app:test: -     "message": "Read error",
@spicetime/react-app:test: -   },
@spicetime/react-app:test: +   [TypeError: file.text is not a function],
@spicetime/react-app:test:   ]
@spicetime/react-app:test: 
@spicetime/react-app:test: 
@spicetime/react-app:test: Number of calls: 1
@spicetime/react-app:test: 
@spicetime/react-app:test: 
@spicetime/react-app:test: Ignored nodes: comments, script, style
@spicetime/react-app:test: [36m<html>[39m
@spicetime/react-app:test:   [36m<head />[39m
@spicetime/react-app:test:   [36m<body>[39m
@spicetime/react-app:test:     [36m<div>[39m
@spicetime/react-app:test:       [36m<div[39m
@spicetime/react-app:test:         [33mclass[39m=[32m"  "[39m
@spicetime/react-app:test:       [36m>[39m
@spicetime/react-app:test:         [36m<div>[39m
@spicetime/react-app:test:           [0mDrop patch files here[0m
@spicetime/react-app:test:         [36m</div>[39m
@spicetime/react-app:test:       [36m</div>[39m
@spicetime/react-app:test:     [36m</div>[39m
@spicetime/react-app:test:   [36m</body>[39m
@spicetime/react-app:test: [36m</html>[39m
@spicetime/react-app:test:  ❯ src/components/PatchDispatcher/components/PatchDispatcher.test.tsx:158:23
@spicetime/react-app:test:     156| 
@spicetime/react-app:test:     157|     await waitFor(() => {
@spicetime/react-app:test:     158|       expect(onError).toHaveBeenCalledWith(
@spicetime/react-app:test:        |                       ^
@spicetime/react-app:test:     159|         expect.objectContaining({
@spicetime/react-app:test:     160|           message: 'Read error',
@spicetime/react-app:test:  ❯ runWithExpensiveErrorDiagnosticsDisabled ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:47:12
@spicetime/react-app:test:  ❯ checkCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:124:77
@spicetime/react-app:test:  ❯ Timeout.checkRealTimersCallback ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/wait-for.js:118:16
@spicetime/react-app:test: 
@spicetime/react-app:test: ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/6]⎯
@spicetime/react-app:test: 
@spicetime/react-app:test:  FAIL  src/components/PatchDispatcher/components/PatchDispatcher.test.tsx > PatchDispatcher Component > shows processing state during patch application
@spicetime/react-app:test: TestingLibraryElementError: Unable to find an element with the text: Processing patch.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.
@spicetime/react-app:test: 
@spicetime/react-app:test: Ignored nodes: comments, script, style
@spicetime/react-app:test: [36m<body>[39m
@spicetime/react-app:test:   [36m<div>[39m
@spicetime/react-app:test:     [36m<div[39m
@spicetime/react-app:test:       [33mclass[39m=[32m"  "[39m
@spicetime/react-app:test:     [36m>[39m
@spicetime/react-app:test:       [36m<div>[39m
@spicetime/react-app:test:         [0mDrop patch files here[0m
@spicetime/react-app:test:       [36m</div>[39m
@spicetime/react-app:test:     [36m</div>[39m
@spicetime/react-app:test:   [36m</div>[39m
@spicetime/react-app:test: [36m</body>[39m
@spicetime/react-app:test:  ❯ Object.getElementError ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/config.js:37:19
@spicetime/react-app:test:  ❯ ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:76:38
@spicetime/react-app:test:  ❯ ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:52:17
@spicetime/react-app:test:  ❯ ../../node_modules/.pnpm/@testing-library+dom@10.4.0/node_modules/@testing-library/dom/dist/query-helpers.js:95:19
@spicetime/react-app:test:  ❯ src/components/PatchDispatcher/components/PatchDispatcher.test.tsx:184:12
@spicetime/react-app:test:     182| 
@spicetime/react-app:test:     183|     // Assert that the processing state is shown initially.
@spicetime/react-app:test:     184|     expect(getByText('Processing patch...')).toBeInTheDocument()
@spicetime/react-app:test:        |            ^
@spicetime/react-app:test:     185| 
@spicetime/react-app:test:     186|     // Wait until the processing state is no longer displayed.
@spicetime/react-app:test: 
@spicetime/react-app:test: ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/6]⎯
@spicetime/react-app:test: 
@spicetime/react-app:test:  FAIL  src/components/PatchDispatcher/components/PatchDispatcher.test.tsx > PatchDispatcher Component > must be used within FileSystemContext
@spicetime/react-app:test: AssertionError: expected [Function] to throw an error
@spicetime/react-app:test: 
@spicetime/react-app:test: - Expected: 
@spicetime/react-app:test: null
@spicetime/react-app:test: 
@spicetime/react-app:test: + Received: 
@spicetime/react-app:test: undefined
@spicetime/react-app:test: 
@spicetime/react-app:test:  ❯ src/components/PatchDispatcher/components/PatchDispatcher.test.tsx:197:47
@spicetime/react-app:test:     195|    */
@spicetime/react-app:test:     196|   it('must be used within FileSystemContext', () => {
@spicetime/react-app:test:     197|     expect(() => render(<PatchDispatcher />)).toThrow(
@spicetime/react-app:test:        |                                               ^
@spicetime/react-app:test:     198|       'useFileSystem must be used within FileSystemProvider',
@spicetime/react-app:test:     199|     )
@spicetime/react-app:test: 
@spicetime/react-app:test: ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/6]⎯
@spicetime/react-app:test: 
@spicetime/react-app:test:  Test Files  2 failed | 2 passed (4)
@spicetime/react-app:test:       Tests  5 failed | 15 passed (20)
@spicetime/react-app:test:    Start at  07:52:07
@spicetime/react-app:test:    Duration  3.08s (transform 152ms, setup 518ms, collect 546ms, tests 2.09s, environment 1.54s, prepare 299ms)
@spicetime/react-app:test: 
@spicetime/react-app:test:  ELIFECYCLE  Test failed. See above for more details.

 Tasks:    0 successful, 1 total
Cached:    0 cached, 1 total
  Time:    3.797s 
Failed:    @spicetime/react-app#test

 ELIFECYCLE  Test failed. See above for more details.
